<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <meta name="generator" content="Pelican" />
        <title>Monolog Blog - windows</title>
        <link rel="stylesheet" href="https://www.stevehemingway.com/theme/css/main.css" />
        <link href="https://www.stevehemingway.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Monolog Blog Atom Feed" />
        <link href="https://www.stevehemingway.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Monolog Blog RSS Feed" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://www.stevehemingway.com/">Monolog Blog <strong>Mainly markets but a smattering of other stuff</strong></a></h1>
                <nav><ul>
                    <li><a href="https://www.stevehemingway.com/category/blog.html">blog</a></li>
                    <li><a href="https://www.stevehemingway.com/category/books.html">books</a></li>
                    <li><a href="https://www.stevehemingway.com/category/knebworth.html">knebworth</a></li>
                    <li><a href="https://www.stevehemingway.com/category/markets.html">markets</a></li>
                    <li><a href="https://www.stevehemingway.com/category/misc.html">misc</a></li>
                    <li><a href="https://www.stevehemingway.com/category/politics.html">politics</a></li>
                    <li><a href="https://www.stevehemingway.com/category/science.html">science</a></li>
                    <li><a href="https://www.stevehemingway.com/category/tech.html">tech</a></li>
                    <li><a href="https://www.stevehemingway.com/category/technical.html">technical</a></li>
                    <li><a href="https://www.stevehemingway.com/category/technology.html">technology</a></li>
                    <li><a href="https://www.stevehemingway.com/category/trading.html">trading</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="https://www.stevehemingway.com/text-templating-using-mustache-on-windows.html">Text templating using Mustache on Windows</a></h1>
<footer class="post-info">
        <abbr class="published" title="2020-08-17T00:00:00+01:00">
                Published: Mon 17 August 2020
        </abbr>
		<br />
        <abbr class="modified" title="2020-08-17T14:57:51.419614+01:00">
                Updated: Mon 17 August 2020
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://www.stevehemingway.com/author/me.html">me</a>
        </address>
<p>In <a href="https://www.stevehemingway.com/category/technical.html">technical</a>.</p>
<p>tags: <a href="https://www.stevehemingway.com/tag/windows.html">windows</a> </p>
</footer><!-- /.post-info --><h1>The problem</h1>
<p>I want to generate a series of text files from a template.
I was thinking about using the C preprocessor, cpp.
The advantage is that I have used it for years, 
the disadvantage is that it is specifically written to pre-process C code and is not really general purpose.
An additional disadvantage is that it appears not to be available as a standalone executable on Windows.</p>
<p>Because of this, I decided to use <a href="https://mustache.github.io/mustache.1.html">Mustache</a>.
This uses YAML to represent the variable part (content?) and seems to be available everywhere.
After a few false starts trying to use a Python implementation, I settled on the Ruby one.
It's quite possible to install Ruby and gem on Windows. I think I used <a href="https://stackoverflow.com/questions/21625582/is-there-a-standalone-portable-command-line-implementation-of-mustache-for-wind">this</a> to get going.
I had to update my Ruby install, as I know nothing about coding in the language and I just wanted a runnable version.</p>
<p>I like YAML, because it's such a lightweight syntax. It's used to create the various headers in Pelican, 
the processor that generates this very page. </p>
<p>Templates are very powerful. It's a pity that they are not used more. My former colleague Ian Williamson did some wonderful stuff with them,
using a parser he crafted using AWK (I think). </p>
<p>I got bogged down by the fact that my template had a pound sign in it (&pound;).
After <em>a lot</em> of experimenting, I discovered that the solution was to make the original template encoded as UTF-8-BOM (rather than UTF-8).
It's all to do with powershell having an inconsistent handling of encodings, I think,
but I really couldn't care less.</p>
<p>I don't know much about encodings, but I now now that BOM stands for Byte Order Mark. 
I think it's equivalent to the magic byte in unix that allows the file command to know what file type it's looking at.
Whatever it is, it fixes the problem nicely.
Random experimenting with lots of other encodings didn't work nearly so well.</p>
<p>Notepad++, which is an excellent editor, allows a file to be converted to a range of encodings at the click of a menu. 
It worked for me.</p>
<p>Happy Coding!</p>
<p>Steve.</p>                </article>
            </aside><!-- /#featured -->
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://www.stevehemingway.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>
                            <li><a href="https://www.stevehemingway.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate">rss feed</a></li>

                            <li><a href="steve@stevehemingway.com">email</a></li>
                            <li><a href="https://www.goodreads.com/user/show/30000791-stephen-hemingway">goodreads</a></li>
                            <li><a href="https://twitter.com/steveknebworth">twitter</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>